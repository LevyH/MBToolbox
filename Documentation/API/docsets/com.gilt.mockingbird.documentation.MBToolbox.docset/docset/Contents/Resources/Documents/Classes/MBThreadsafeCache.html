<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<title>MBThreadsafeCache Class Reference</title>

	<link rel="stylesheet" href="../css/style.css">
	<meta name="viewport" content="initial-scale=1, maximum-scale=1.4">
	<meta name="generator" content="appledoc 2.2.1 (build 1334)">
</head>
<body class="appledoc">
	<header>
		<div class="container" class="hide-in-xcode">
			
			<h1 id="library-title">
				<a href="../index.html">MBToolbox </a>
			</h1>

			<p id="developer-home">
				<a href="../index.html">Gilt Groupe</a>
			</p>
			
		</div>
	</header>

	<aside>
		<div class="container">
			<nav>
				<ul id="header-buttons" role="toolbar">
					<li><a href="../index.html">Index</a></li>
<li><a href="../hierarchy.html">Hierarchy</a></li>

					<li id="on-this-page" role="navigation">
						<label>
							On This Page

							<div class="chevron">
								<div class="chevy chevron-left"></div>
								<div class="chevy chevron-right"></div>
							</div>

							<select id="jump-to">
	<option value="top">Jump To&#133;</option>
	
	<option value="overview">Overview</option>
	

	
	
	<option value="tasks">Tasks</option>
	
	

	
	

	

	
	<optgroup label="Instance Methods">
		
		<option value="//api/name/clearMemoryCache">- clearMemoryCache</option>
		
		<option value="//api/name/init">- init</option>
		
		<option value="//api/name/initWithExceptionProtection:">- initWithExceptionProtection:</option>
		
		<option value="//api/name/initWithExceptionProtection:ignoreMemoryWarnings:">- initWithExceptionProtection:ignoreMemoryWarnings:</option>
		
		<option value="//api/name/isKeyInCache:">- isKeyInCache:</option>
		
		<option value="//api/name/lock">- lock</option>
		
		<option value="//api/name/memoryWarning">- memoryWarning</option>
		
		<option value="//api/name/objectForKey:">- objectForKey:</option>
		
		<option value="//api/name/objectForKeyedSubscript:">- objectForKeyedSubscript:</option>
		
		<option value="//api/name/removeObjectForKey:">- removeObjectForKey:</option>
		
		<option value="//api/name/setObject:forKey:">- setObject:forKey:</option>
		
		<option value="//api/name/setObject:forKeyedSubscript:">- setObject:forKeyedSubscript:</option>
		
		<option value="//api/name/unlock">- unlock</option>
		
	</optgroup>
	
	
</select>
						</label>
					</li>
				</ul>
			</nav>
		</div>
	</aside>

	<article>
		<div id="overview_contents" class="container">
			<div id="content">
				<main role="main">
					<h1 class="title">MBThreadsafeCache Class Reference</h1>

					
					<div class="section section-specification"><table cellspacing="0"><tbody>
						<tr>
	<th>Inherits from</th>
	<td>NSObject</td>
</tr><tr>
	<th>Declared in</th>
	<td>MBThreadsafeCache.h</td>
</tr>
						</tbody></table></div>
					

                    
					
					<div class="section section-overview">
						<a title="Overview" name="overview"></a>
						<h2 class="subtitle subtitle-overview">Overview</h2>
						<p>This class implements in-memory object cache that can be safely shared
among multiple threads simultaneously.</p>

<p>The cache provides an accessor/mutator interface similar to <code>NSDictionary</code> and
<code>NSMutableDictionary</code>, and supports keyed subscripting.</p><div class="note"><p><strong>Note:</strong> Classes that wish to subclass <code>MBThreadsafeCache</code> should refer
            to the internal <a href="../Categories/MBThreadsafeCache+ForSubclassEyesOnly.html"><code>MBThreadsafeCache(ForSubclassEyesOnly)</code></a> methods
            declared in the header file <code>MBThreadsafeCache+Subclassing.h</code>.</p></div>
					</div>
					
					

					
					
					<div class="section section-tasks">
						<a title="Tasks" name="tasks"></a>
						

						
						<h2 class="task-title">Other Methods</h2>

						<div class="task-list">
							<div class="section-method">
	<a name="//api/name/initWithExceptionProtection:ignoreMemoryWarnings:" title="initWithExceptionProtection:ignoreMemoryWarnings:"></a>
	<h3 class="method-title"><code><a href="#//api/name/initWithExceptionProtection:ignoreMemoryWarnings:">&ndash;&nbsp;initWithExceptionProtection:ignoreMemoryWarnings:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Initializes a new <code>MBThreadsafeCache</code> instance.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (nonnull instancetype)initWithExceptionProtection:(BOOL)<em>protect</em> ignoreMemoryWarnings:(BOOL)<em>ignore</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>protect</code></th>
						<td><p>If <code>YES</code>, the cache will ensure that internal exceptions
            do not leave locks in an inconsistent state. This adds overhead,
            and is generally not needed unless subclasses override primitive
            hooks that may throw exceptions.</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>ignore</code></th>
						<td><p>If <code>YES</code>, the cache will not automatically clear itself when
            a memory warning occurs.</p></td>
					</tr>
				
				</table>
			</div>
			

			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">MBThreadsafeCache.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/initWithExceptionProtection:" title="initWithExceptionProtection:"></a>
	<h3 class="method-title"><code><a href="#//api/name/initWithExceptionProtection:">&ndash;&nbsp;initWithExceptionProtection:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Initializes a new <code>MBThreadsafeCache</code> instance.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (nonnull instancetype)initWithExceptionProtection:(BOOL)<em>protect</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>protect</code></th>
						<td><p>If <code>YES</code>, the cache will ensure that internal exceptions
            do not leave locks in an inconsistent state. This adds overhead,
            and is generally not needed unless subclasses override primitive
            hooks that may throw exceptions.</p></td>
					</tr>
				
				</table>
			</div>
			

			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">MBThreadsafeCache.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/init" title="init"></a>
	<h3 class="method-title"><code><a href="#//api/name/init">&ndash;&nbsp;init</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>The default initializer for <code>MBThreadsafeCache</code> instances.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (nonnull instancetype)init</code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>Equivalent to calling <code>initWithExceptionProtection:NO ignoreMemoryWarnings:NO</code>.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">MBThreadsafeCache.h</code></p>
			</div>
			
			
		</div>
	</div>
</div>
						</div>
						

						<a title="Accessing cached items" name="task_Accessing cached items"></a>
						<h2 class="task-title">Accessing cached items</h2>

						<div class="task-list">
							<div class="section-method">
	<a name="//api/name/isKeyInCache:" title="isKeyInCache:"></a>
	<h3 class="method-title"><code><a href="#//api/name/isKeyInCache:">&ndash;&nbsp;isKeyInCache:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Determines whether a given key has a corresponding value in the cache.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)isKeyInCache:(nonnull id)<em>key</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>key</code></th>
						<td><p>The key.</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p><code>YES</code> if there is a value for the given key in the cache; <code>NO</code>
            otherwise.</p>
			</div>
			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">MBThreadsafeCache.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/objectForKey:" title="objectForKey:"></a>
	<h3 class="method-title"><code><a href="#//api/name/objectForKey:">&ndash;&nbsp;objectForKey:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Retrieves a cached object value given its key.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (nullable id)objectForKey:(nonnull id)<em>key</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>key</code></th>
						<td><p>The key whose associated value is to be retrieved.</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>The value associated with <code>key</code>. May be <code>nil</code>.</p>
			</div>
			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">MBThreadsafeCache.h</code></p>
			</div>
			
			
		</div>
	</div>
</div>
						</div>
						

						<a title="Modifying the cache" name="task_Modifying the cache"></a>
						<h2 class="task-title">Modifying the cache</h2>

						<div class="task-list">
							<div class="section-method">
	<a name="//api/name/setObject:forKey:" title="setObject:forKey:"></a>
	<h3 class="method-title"><code><a href="#//api/name/setObject:forKey:">&ndash;&nbsp;setObject:forKey:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Sets a cached object value and associates it with the given key.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)setObject:(nonnull id)<em>obj</em> forKey:(nonnull id)<em>key</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>obj</code></th>
						<td><p>The new cached value.</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>key</code></th>
						<td><p>The key whose associated value is to be set.</p></td>
					</tr>
				
				</table>
			</div>
			

			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">MBThreadsafeCache.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/removeObjectForKey:" title="removeObjectForKey:"></a>
	<h3 class="method-title"><code><a href="#//api/name/removeObjectForKey:">&ndash;&nbsp;removeObjectForKey:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Removes from the cache the object associated with the given key.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)removeObjectForKey:(nonnull id)<em>key</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>key</code></th>
						<td><p>The key whose associated value is to be removed.</p></td>
					</tr>
				
				</table>
			</div>
			

			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">MBThreadsafeCache.h</code></p>
			</div>
			
			
		</div>
	</div>
</div>
						</div>
						

						<a title="Keyed subscripting support" name="task_Keyed subscripting support"></a>
						<h2 class="task-title">Keyed subscripting support</h2>

						<div class="task-list">
							<div class="section-method">
	<a name="//api/name/objectForKeyedSubscript:" title="objectForKeyedSubscript:"></a>
	<h3 class="method-title"><code><a href="#//api/name/objectForKeyedSubscript:">&ndash;&nbsp;objectForKeyedSubscript:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Allows accessing a cached value using the Objective-C keyed subscripting
notation.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (nullable id)objectForKeyedSubscript:(nonnull id)<em>key</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>key</code></th>
						<td><p>The key whose associated value is to be retrieved.</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>The value associated with <code>key</code>. May be <code>nil</code>.</p>
			</div>
			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">MBThreadsafeCache.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/setObject:forKeyedSubscript:" title="setObject:forKeyedSubscript:"></a>
	<h3 class="method-title"><code><a href="#//api/name/setObject:forKeyedSubscript:">&ndash;&nbsp;setObject:forKeyedSubscript:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Allows setting a cached value using the Objective-C keyed subscripting
notation.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)setObject:(nonnull id)<em>obj</em> forKeyedSubscript:(nonnull id)<em>key</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>obj</code></th>
						<td><p>The new cached value.</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>key</code></th>
						<td><p>The key whose associated value is to be set.</p></td>
					</tr>
				
				</table>
			</div>
			

			

			

			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">MBThreadsafeCache.h</code></p>
			</div>
			
			
		</div>
	</div>
</div>
						</div>
						

						<a title="Memory management" name="task_Memory management"></a>
						<h2 class="task-title">Memory management</h2>

						<div class="task-list">
							<div class="section-method">
	<a name="//api/name/clearMemoryCache" title="clearMemoryCache"></a>
	<h3 class="method-title"><code><a href="#//api/name/clearMemoryCache">&ndash;&nbsp;clearMemoryCache</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Empties the in-memory object cache.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)clearMemoryCache</code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>Depending on how the cache instance was initialized, the memory cache may
be cleared automatically in response to memory warnings.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">MBThreadsafeCache.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/memoryWarning" title="memoryWarning"></a>
	<h3 class="method-title"><code><a href="#//api/name/memoryWarning">&ndash;&nbsp;memoryWarning</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>This method is called automatically when a memory warning occurs, unless the
cache was explicitly initialized to ignore memory warnings.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)memoryWarning</code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>The default implementation simply calls <a href="#//api/name/clearMemoryCache"><code>clearMemoryCache</code></a>; however, subclasses
may override this to perform additional cleanup when a memory warning occurs.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">MBThreadsafeCache.h</code></p>
			</div>
			
			
		</div>
	</div>
</div>
						</div>
						

						<a title="Manipulating the cache lock" name="task_Manipulating the cache lock"></a>
						<h2 class="task-title">Manipulating the cache lock</h2>

						<div class="task-list">
							<div class="section-method">
	<a name="//api/name/lock" title="lock"></a>
	<h3 class="method-title"><code><a href="#//api/name/lock">&ndash;&nbsp;lock</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Locks the cache.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)lock</code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>Used internally by the <code>MBThreadsafeCache</code> implementation and subclasses.</p><div class="note"><p><strong>Note:</strong> You will generally not need to call this directly unless you want
            to make multiple changes to the cache atomically.</p></div>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">MBThreadsafeCache.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/unlock" title="unlock"></a>
	<h3 class="method-title"><code><a href="#//api/name/unlock">&ndash;&nbsp;unlock</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Unlocks the cache.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)unlock</code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>Used internally by the <code>MBThreadsafeCache</code> implementation and subclasses.</p><div class="note"><p><strong>Note:</strong> You will generally not need to call this directly unless you want
            to make multiple changes to the cache atomically.</p></div>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">MBThreadsafeCache.h</code></p>
			</div>
			
			
		</div>
	</div>
</div>
						</div>
						
					</div>
					
					

                    
                    
          
				</main>

				<footer>
					<div class="footer-copyright">
						
						<p class="copyright">Copyright &copy; 2017 Gilt Groupe. All rights reserved. Updated: 2017-04-06</p>
						
						
						<p class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.2.1 (build 1334)</a>.</p>
						
					</div>
				</footer>
			</div>
		</div>
	</article>

	<script src="../js/script.js"></script>
</body>
</html>